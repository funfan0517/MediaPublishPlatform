# 前端集成新平台指南

## 1. 概述

本文档详细说明如何在前端项目中集成新的视频发布平台，确保新平台能够在视频发布中心正确显示和使用。

## 2. 最佳实践与核心原则

### 2.1 代码规范
- 保持平台列表和映射对象的一致性
- 为新添加的代码添加适当的注释
- 遵循项目现有的命名规范

### 2.2 可维护性
- 将平台相关的常量和映射集中管理
- 考虑使用配置文件管理平台信息，便于后续扩展

### 2.3 平台类型映射一致性

**核心原则**：平台类型映射是前端集成新平台的关键，所有涉及平台类型转换的地方必须保持一致，否则会导致平台功能跳转到其他平台或显示异常。

**映射关系说明**：
- 平台类型编码：后端定义的数字编码（如Facebook为7）
- 平台名称：前端显示给用户的名称（如"Facebook"）
- 映射方向：
  - 编码→名称：用于显示账号平台名称
  - 名称→编码：用于API请求和SSE连接

**必须检查的位置**：

| 模块 | 文件路径 | 映射类型 | 代码位置 |
|------|----------|----------|----------|
| 视频发布中心 | `PublishCenter.vue` | 编码→名称 | `platforms` 数组、`platformMap` 对象 |
| 账号管理 | `AccountManagement.vue` | 名称→编码 | `connectSSE` 函数中的 `platformTypeMap` |
| 账号管理 | `AccountManagement.vue` | 名称→编码 | `submitAccountForm` 函数中的 `platformTypeMap` |
| 账号管理 | `AccountManagement.vue` | 名称→标签类型 | `getPlatformTagType` 函数（如有） |
| 账号管理 | `AccountManagement.vue` | 名称→头像 | `getDefaultAvatar` 函数（如有） |
| 账号Store | `stores/account.js` | 编码→名称 | `platformTypes` 对象 |
| 网站管理 | `Website.vue` | 名称→配置 | 平台配置数组 |

**验证方法**：

1. **静态检查**：
   - 使用全局搜索工具（如VS Code的搜索功能）搜索所有包含平台类型映射的文件
   - 检查每个映射对象中是否包含新平台的映射
   - 确保同一平台的编码在所有映射中保持一致

2. **动态测试**：
   ```
   测试场景1：添加账号
   - 操作：进入账号管理页面，点击"添加账号"，选择新平台
   - 预期结果：跳转到新平台的登录界面，而非其他平台
   - 失败原因：`connectSSE` 函数中的 `platformTypeMap` 缺少新平台映射
   
   测试场景2：编辑账号
   - 操作：进入账号管理页面，编辑新平台的账号，保存
   - 预期结果：账号保存成功，平台类型正确
   - 失败原因：`submitAccountForm` 函数中的 `platformTypeMap` 缺少新平台映射
   
   测试场景3：发布视频
   - 操作：进入视频发布中心，选择新平台，选择账号，发布视频
   - 预期结果：视频发布成功，后端接收到正确的平台类型
   - 失败原因：`PublishCenter.vue` 中的平台类型映射错误
   
   测试场景4：查看账号列表
   - 操作：进入账号管理页面，查看新平台的账号
   - 预期结果：账号显示正确的平台名称，而非"未知"
   - 失败原因：`account.js` 中的 `platformTypes` 缺少新平台映射
   ```

**常见问题及解决方案**：

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 选择新平台却跳转到小红书登录 | `connectSSE` 函数中的 `platformTypeMap` 缺少新平台映射，导致使用默认类型1（小红书） | 在 `platformTypeMap` 中添加新平台映射：`'新平台名称': '新平台编码'` |
| 编辑账号时平台类型错误 | `submitAccountForm` 函数中的 `platformTypeMap` 缺少新平台映射 | 在 `platformTypeMap` 中添加新平台映射：`'新平台名称': 新平台编码` |
| 账号显示"未知平台" | `account.js` 中的 `platformTypes` 缺少新平台映射 | 在 `platformTypes` 中添加新平台映射：`新平台编码: '新平台名称'` |
| 视频发布时平台类型错误 | `PublishCenter.vue` 中的 `platforms` 数组或 `platformMap` 对象缺少新平台映射 | 在 `platforms` 数组和 `platformMap` 对象中添加新平台映射 |
| 网站管理页面不显示新平台 | `Website.vue` 中的平台配置数组缺少新平台配置 | 在平台配置数组中添加新平台配置 |

**最佳实践**：
- 创建一个统一的平台类型映射配置文件，所有组件从该文件导入映射关系
- 每次添加新平台时，使用全局搜索检查所有映射位置
- 编写自动化测试用例，验证所有平台类型映射的一致性
- 在代码审查时，重点检查平台类型映射的完整性

**示例：统一平台类型映射配置**

```javascript
// src/config/platforms.js
// 统一管理平台类型映射

export const PLATFORM_TYPES = {
  1: '小红书',
  2: '视频号',
  3: '抖音',
  4: '快手',
  5: 'TikTok',
  6: 'Instagram',
  7: 'Facebook',
  // 新增平台在此添加
}

export const PLATFORM_NAMES = {
  '小红书': 1,
  '视频号': 2,
  '抖音': 3,
  '快手': 4,
  'TikTok': 5,
  'Instagram': 6,
  'Facebook': 7,
  // 新增平台在此添加
}

export const PLATFORM_LIST = Object.entries(PLATFORM_TYPES).map(([key, name]) => ({
  key: parseInt(key),
  name
}))
```

**使用示例**：

```javascript
// 在组件中导入统一配置
import { PLATFORM_TYPES, PLATFORM_NAMES, PLATFORM_LIST } from '@/config/platforms'

// 使用平台列表
const platforms = PLATFORM_LIST

// 使用平台类型映射
const platformMap = PLATFORM_TYPES

// 在函数中使用名称→编码映射
const platformType = PLATFORM_NAMES[platformName]
```

通过使用统一的平台类型映射配置，可以避免手动维护多个映射对象导致的不一致问题，提高代码的可维护性和可靠性。

## 3. 集成准备工作

### 3.1 平台调研
- 确认新平台的类型编码（后端定义的type字段值）
- 了解新平台是否需要特定的UI元素或参数

### 3.2 环境要求
- 前端项目正常运行环境
- 已完成后端对新平台的支持

## 4. 集成步骤详解

### 4.1 视频发布中心集成

#### 4.1.1 添加平台常量定义

**目的**：在视频发布中心添加新平台选项，使用户可以选择该平台进行视频发布。

**操作步骤**：
1. 打开文件：`sau_frontend/src/views/PublishCenter.vue`
2. 找到 `platforms` 数组（通常在文件的 `<script setup>` 部分）
3. 添加新平台定义，格式为：`{ key: 平台类型编码, name: '平台名称' }`

**代码示例**：
```javascript
// 平台列表 - 对应后端type字段
const platforms = [
  { key: 3, name: '抖音' },
  { key: 4, name: '快手' },
  { key: 2, name: '视频号' },
  { key: 1, name: '小红书' },
  { key: 5, name: 'TikTok' },
  { key: 6, name: 'Instagram' },
  { key: 7, name: 'Facebook' }, // 新增平台示例
  // 更多平台...
]
```

**预期结果**：在视频发布中心的平台选择区域，将显示新添加的平台选项。

#### 4.1.2 更新账号映射配置

**目的**：确保选择新平台时，能够正确过滤出该平台的账号。

**操作步骤**：
1. 在 `PublishCenter.vue` 文件中找到 `availableAccounts` 计算属性
2. 更新 `platformMap` 对象，添加新平台的类型编码到平台名称的映射

**代码示例**：
```javascript
const availableAccounts = computed(() => {
  const platformMap = {
    3: '抖音',
    2: '视频号',
    1: '小红书',
    4: '快手',
    5: 'TikTok',
    6: 'Instagram',
    7: 'Facebook', // 新增平台映射
    // 更多平台...
  }
  const currentPlatform = currentTab.value ? platformMap[currentTab.value.selectedPlatform] : null
  return currentPlatform ? accountStore.accounts.filter(acc => acc.platform === currentPlatform) : []
})
```

**预期结果**：选择新平台后，账号选择区域将只显示该平台的账号。

#### 4.1.3 添加平台特定UI元素（可选）

**目的**：为新平台添加特定的UI元素，如抖音的商品链接、视频号的草稿选项等。

**操作步骤**：
1. 在 `PublishCenter.vue` 文件的模板部分，找到平台相关的UI区域
2. 使用 `v-if` 条件渲染，为新平台添加特定UI元素
3. 确保在 `defaultTabInit` 对象中添加相应的属性
4. 在 `confirmPublish` 函数中将这些属性添加到 `publishData` 中

**代码示例**：
```vue
<!-- 新平台特定UI元素 -->
<div v-if="tab.selectedPlatform === 7" class="new-platform-section">
  <h3>Facebook特定参数</h3>
  <el-input
    v-model="tab.facebookSpecificParam"
    type="text"
    placeholder="请输入Facebook特定参数"
    maxlength="200"
    class="facebook-param-input"
  />
</div>
```

```javascript
// 在defaultTabInit中添加属性
const defaultTabInit = {
  // 其他属性...
  facebookSpecificParam: '', // Facebook特定参数
  // 其他平台特定属性...
}

// 在confirmPublish函数中添加到publishData
const publishData = {
  // 其他字段...
  facebookSpecificParam: tab.facebookSpecificParam.trim() || '', // Facebook特定参数
  // 其他平台特定参数...
}
```

**预期结果**：选择新平台后，将显示该平台的特定UI元素，且数据会正确发送到后端。

#### 4.1.4 确保API调用支持

**目的**：确保发布视频时，发送到后端的数据格式正确，包含所有必要字段。

**操作步骤**：
1. 在 `PublishCenter.vue` 文件中找到 `confirmPublish` 函数
2. 检查 `publishData` 对象，确保包含以下字段：
   - `type`: 平台类型编码（必须）
   - `accountList`: 账号文件路径列表（必须）
   - `fileList`: 视频文件路径列表（必须）
   - `enableTimer`: 定时发布开关（必须）
   - 其他平台特定参数（可选）

**代码示例**：
```javascript
const publishData = {
  type: tab.selectedPlatform, // 平台类型编码（必须）
  title: tab.title,
  tags: tab.selectedTopics,
  fileList: tab.fileList.map(file => file.path), // 视频文件路径列表（必须）
  accountList: tab.selectedAccounts.map(accountId => {
    const account = accountStore.accounts.find(acc => acc.id === accountId)
    return account ? account.filePath : accountId
  }), // 账号文件路径列表（必须）
  enableTimer: tab.scheduleEnabled ? 1 : 0, // 定时发布开关（必须）
  videosPerDay: tab.scheduleEnabled ? tab.videosPerDay || 1 : 1,
  dailyTimes: tab.scheduleEnabled ? tab.dailyTimes || ['10:00'] : ['10:00'],
  startDays: tab.scheduleEnabled ? tab.startDays || 0 : 0,
  // 其他平台特定参数...
}
```

**预期结果**：发布视频时，数据会正确发送到后端，后端能够识别并处理新平台的请求。

### 4.2 账号管理页面集成

**目的**：允许用户在账号管理页面添加、编辑和查看新平台的账号。

**操作步骤**：
1. 打开文件：`sau_frontend/src/views/AccountManagement.vue`
2. **添加平台选择器选项**：
   - 找到平台选择下拉框的选项列表
   - 添加新平台选项，格式为：`{ label: '平台名称', value: '平台名称' }`
   
3. **添加平台标签页**：
   - 找到平台标签页的列表
   - 添加新平台的标签页，使用 `v-if="activeTab === '平台名称'"` 条件渲染
   
4. **添加过滤账号的计算属性**：
   - 添加 `filtered平台名称Accounts` 计算属性，用于过滤显示当前平台的账号
   
5. **更新 connectSSE 函数**：
   - 找到 `connectSSE` 函数中的 `platformTypeMap` 对象
   - 添加新平台的映射，格式为：`'平台名称': '平台类型编码'`
   
6. **更新 submitAccountForm 函数**：
   - 找到 `submitAccountForm` 函数中的 `platformTypeMap` 对象
   - 添加新平台的映射，格式为：`'平台名称': 平台类型编码`
   
7. **更新 getPlatformTagType 函数**（如有）：
   - 如果存在该函数，添加新平台的标签类型映射
   
8. **更新 getDefaultAvatar 函数**（如有）：
   - 如果存在该函数，添加新平台的默认头像映射

**代码示例**：
```vue
<!-- 1. 添加平台选择器选项 -->
<el-select v-model="form.platform" placeholder="请选择平台">
  <el-option label="小红书" value="小红书" />
  <el-option label="视频号" value="视频号" />
  <el-option label="抖音" value="抖音" />
  <el-option label="快手" value="快手" />
  <el-option label="TikTok" value="TikTok" />
  <el-option label="Instagram" value="Instagram" />
  <el-option label="Facebook" value="Facebook" />
</el-select>

<!-- 2. 添加平台标签页 -->
<el-tab-pane v-if="activeTab === 'Facebook'" label="Facebook" name="Facebook">
  <!-- Facebook账号列表 -->
  <div v-for="account in filteredFacebookAccounts" :key="account.id" class="account-item">
    <!-- 账号信息展示 -->
  </div>
</el-tab-pane>
```

```javascript
// 3. 添加过滤账号的计算属性
const filteredFacebookAccounts = computed(() => {
  return accountStore.accounts.filter(account => account.platform === 'Facebook')
})

// 4. 更新 connectSSE 函数中的 platformTypeMap
const connectSSE = () => {
  const platformTypeMap = {
    '小红书': '1',
    '视频号': '2',
    '抖音': '3',
    '快手': '4',
    'TikTok': '5',
    'Instagram': '6',
    'Facebook': '7', // 新增平台映射
  }
  // SSE连接逻辑...
}

// 5. 更新 submitAccountForm 函数中的 platformTypeMap
const submitAccountForm = () => {
  const platformTypeMap = {
    '小红书': 1,
    '视频号': 2,
    '抖音': 3,
    '快手': 4,
    'TikTok': 5,
    'Instagram': 6,
    'Facebook': 7, // 新增平台映射
  }
  // 表单提交逻辑...
}
```

**预期结果**：
- 账号管理页面的平台选择器中显示新平台选项
- 新平台的标签页可以正常切换和显示该平台的账号
- 添加账号时，选择新平台可以正确跳转到该平台的登录界面
- 编辑账号时，新平台的账号可以正确保存

### 4.3 更新账号Store平台映射配置

**目的**：确保账号在管理页面和其他地方正确显示平台名称，而不是显示为"未知"。

**操作步骤**：
1. 打开文件：`sau_frontend/src/stores/account.js`
2. 找到 `platformTypes` 对象
3. 添加新平台的类型映射，格式为：`平台类型编码: '平台名称'`

**代码示例**：
```javascript
// 平台类型映射
const platformTypes = {
  1: '小红书',
  2: '视频号',
  3: '抖音',
  4: '快手',
  5: 'TikTok',
  6: 'Instagram',
  7: 'Facebook', // 新增平台映射
  // 更多平台...
}
```

**预期结果**：在账号管理页面和其他显示账号信息的地方，新平台的账号将正确显示平台名称。

### 4.4 网站管理页面集成

**目的**：在网站管理页面添加新平台的配置，确保网站管理功能支持新平台。

**操作步骤**：
1. 打开文件：`sau_frontend/src/views/Website.vue`
2. 找到平台配置数组
3. 添加新平台的配置，格式为：`{ platform: '平台名称', url: '平台官网URL', status: 'active' }`

**代码示例**：
```javascript
// 平台配置数组
const platforms = [
  { platform: '小红书', url: 'https://www.xiaohongshu.com', status: 'active' },
  { platform: '视频号', url: 'https://channels.weixin.qq.com', status: 'active' },
  { platform: '抖音', url: 'https://www.douyin.com', status: 'active' },
  { platform: '快手', url: 'https://www.kuaishou.com', status: 'active' },
  { platform: 'TikTok', url: 'https://www.tiktok.com', status: 'active' },
  { platform: 'Instagram', url: 'https://www.instagram.com', status: 'active' },
  { platform: 'Facebook', url: 'https://www.facebook.com', status: 'active' }, // 新增平台配置
  // 更多平台...
]
```

**预期结果**：网站管理页面将显示新平台的配置信息，支持对该平台的网站状态进行管理。

## 5. 测试与验证

### 5.1 测试策略

#### 5.1.1 手动测试
- **功能测试**：验证新平台的所有功能是否正常工作
- **集成测试**：验证新平台与其他模块的集成是否正常
- **边界测试**：测试各种边界情况，如空数据、异常数据等
- **用户体验测试**：验证新平台的UI/UX是否符合预期

#### 5.1.2 自动化测试
- **单元测试**：测试单个组件或函数的功能
- **集成测试**：测试多个组件或模块的集成
- **端到端测试**：测试完整的用户流程

### 5.2 详细测试步骤

#### 5.2.1 视频发布中心测试

| 测试用例 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 平台选项显示 | 1. 打开视频发布中心<br>2. 查看平台选择区域 | 新平台选项在平台选择区域显示 |
| 账号过滤 | 1. 选择新平台<br>2. 查看账号选择区域 | 只显示新平台的账号 |
| 平台特定UI | 1. 选择新平台<br>2. 查看平台特定UI区域 | 显示新平台的特定UI元素 |
| 视频发布 | 1. 选择新平台和账号<br>2. 填写发布信息<br>3. 点击发布按钮 | 视频发布成功，后端接收到正确的平台类型 |

#### 5.2.2 账号管理页面测试

| 测试用例 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 平台选择器 | 1. 打开账号管理页面<br>2. 点击添加账号按钮<br>3. 查看平台选择器 | 新平台选项在平台选择器中显示 |
| 平台标签页 | 1. 打开账号管理页面<br>2. 查看平台标签页 | 新平台的标签页显示，点击后显示该平台的账号 |
| 添加账号 | 1. 点击添加账号按钮<br>2. 选择新平台<br>3. 点击登录按钮 | 跳转到新平台的登录界面，而非其他平台 |
| 编辑账号 | 1. 选择新平台的账号<br>2. 点击编辑按钮<br>3. 修改账号信息<br>4. 点击保存按钮 | 账号保存成功，平台类型正确 |
| 账号显示 | 1. 查看新平台的账号列表<br>2. 查看账号的平台名称 | 账号正确显示新平台的名称，而非"未知" |

#### 5.2.3 网站管理页面测试

| 测试用例 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 平台配置显示 | 1. 打开网站管理页面<br>2. 查看平台配置列表 | 新平台的配置信息显示 |
| 平台状态管理 | 1. 打开网站管理页面<br>2. 修改新平台的状态<br>3. 保存配置 | 新平台的状态更新成功 |

### 5.3 错误处理测试

| 测试用例 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 缺少平台选择 | 1. 打开视频发布中心<br>2. 不选择平台<br>3. 点击发布按钮 | 显示平台选择的错误提示 |
| 缺少账号选择 | 1. 打开视频发布中心<br>2. 选择新平台<br>3. 不选择账号<br>4. 点击发布按钮 | 显示账号选择的错误提示 |
| 发布失败 | 1. 打开视频发布中心<br>2. 选择新平台和账号<br>3. 填写发布信息<br>4. 模拟发布失败场景<br>5. 点击发布按钮 | 显示发布失败的错误提示 |
| 添加账号失败 | 1. 点击添加账号按钮<br>2. 选择新平台<br>3. 模拟登录失败场景<br>4. 点击登录按钮 | 显示添加账号失败的错误提示 |

### 5.4 测试工具推荐

- **手动测试**：浏览器开发者工具、Postman（用于API测试）
- **自动化测试**：
  - 单元测试：Jest、Vitest
  - 组件测试：Vue Test Utils
  - 端到端测试：Cypress、Playwright
  - API测试：Postman、Newman

### 5.5 测试报告模板

| 测试模块 | 测试用例 | 测试结果 | 备注 |
|----------|----------|----------|------|
| 视频发布中心 | 平台选项显示 | ✅ 通过 | - |
| 视频发布中心 | 账号过滤 | ✅ 通过 | - |
| 视频发布中心 | 平台特定UI | ✅ 通过 | - |
| 视频发布中心 | 视频发布 | ✅ 通过 | - |
| 账号管理页面 | 平台选择器 | ✅ 通过 | - |
| 账号管理页面 | 平台标签页 | ✅ 通过 | - |
| 账号管理页面 | 添加账号 | ✅ 通过 | - |
| 账号管理页面 | 编辑账号 | ✅ 通过 | - |
| 账号管理页面 | 账号显示 | ✅ 通过 | - |
| 网站管理页面 | 平台配置显示 | ✅ 通过 | - |
| 网站管理页面 | 平台状态管理 | ✅ 通过 | - |
| 错误处理 | 缺少平台选择 | ✅ 通过 | - |
| 错误处理 | 缺少账号选择 | ✅ 通过 | - |
| 错误处理 | 发布失败 | ✅ 通过 | - |
| 错误处理 | 添加账号失败 | ✅ 通过 | - |

## 6. 常见问题与解决方案

### 6.1 页面渲染问题

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 新平台标签页不显示 | 缺少平台标签页的条件渲染或标签页名称不匹配 | 检查 `activeTab` 条件渲染，确保标签页名称与平台名称一致 |
| 账号列表显示为空 | 缺少过滤账号的计算属性或计算属性逻辑错误 | 检查 `filtered平台名称Accounts` 计算属性是否正确定义和使用 |
| 平台选择器中没有新平台选项 | 缺少平台选择器选项配置 | 在平台选择下拉框的选项列表中添加新平台选项 |
| 账号显示"未知平台" | 账号Store中缺少平台类型映射 | 在 `account.js` 的 `platformTypes` 对象中添加新平台映射 |

### 6.2 API调用问题

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 发布视频时平台类型错误 | `publishData` 中的 `type` 字段值错误 | 检查 `confirmPublish` 函数中 `type` 字段的赋值是否正确 |
| 添加账号时API请求失败 | 平台类型编码错误或缺少必要字段 | 检查 `connectSSE` 函数中的 `platformTypeMap` 是否正确配置 |
| 编辑账号时平台类型错误 | `submitAccountForm` 函数中的平台类型映射错误 | 检查 `submitAccountForm` 函数中的 `platformTypeMap` 是否正确配置 |

### 6.3 账号管理问题

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 选择新平台却跳转到其他平台登录 | `connectSSE` 函数中的 `platformTypeMap` 缺少新平台映射 | 在 `platformTypeMap` 中添加新平台映射：`'新平台名称': '新平台编码'` |
| 新平台账号无法保存 | 缺少新平台的类型映射或映射错误 | 检查 `submitAccountForm` 函数中的 `platformTypeMap` 是否包含新平台映射 |
| 账号列表中平台图标显示错误 | 缺少新平台的图标映射或图标资源 | 检查 `getDefaultAvatar` 函数中的图标映射，确保为新平台配置了正确的图标 |

### 6.4 视频发布问题

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 无法选择新平台的账号 | `availableAccounts` 计算属性中的 `platformMap` 缺少新平台映射 | 在 `platformMap` 对象中添加新平台的类型编码到名称的映射 |
| 新平台特定UI元素不显示 | 缺少平台特定UI元素的条件渲染 | 检查平台特定UI元素的 `v-if` 条件，确保使用了正确的平台类型编码 |
| 平台特定参数未发送到后端 | 缺少将平台特定参数添加到 `publishData` 的代码 | 在 `confirmPublish` 函数中添加平台特定参数到 `publishData` 对象 |

### 6.5 其他问题

| 问题现象 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 网站管理页面不显示新平台 | `Website.vue` 中的平台配置数组缺少新平台配置 | 在平台配置数组中添加新平台的配置信息 |
| 平台标签类型显示错误 | `getPlatformTagType` 函数中缺少新平台的标签类型映射 | 在 `getPlatformTagType` 函数中添加新平台的标签类型映射 |
| 页面加载缓慢或卡顿 | 计算属性逻辑复杂或数据量过大 | 优化计算属性逻辑，考虑使用缓存或异步加载 |

## 7. 平台集成案例

### 7.1 Instagram平台集成案例

#### 7.1.1 集成内容摘要
已完成Instagram平台在前端系统中的完整集成，包括账号管理和网站管理功能。

#### 7.1.2 具体实施步骤

##### 7.1.2.1 资源文件准备
- 创建Instagram图标资源：`sau_frontend/src/assets/instagram.svg`

##### 7.1.2.2 账号管理页面集成
在`AccountManagement.vue`文件中进行以下修改：
- 添加Instagram平台选择器选项
- 新增Instagram账号标签页
- 导入instagram.svg图标文件
- 更新platformTypeMap映射（Instagram为类型6）
- 添加Instagram账号过滤计算属性

##### 7.1.2.3 更新账号Store平台映射
在`sau_frontend/src/stores/account.js`文件中添加Instagram平台的类型映射：
```javascript
// 平台类型映射
const platformTypes = {
  1: '小红书',
  2: '视频号',
  3: '抖音',
  4: '快手',
  5: 'TikTok',
  6: 'Instagram', // 添加Instagram映射
}
```

##### 7.1.2.4 网站管理页面集成
在`Website.vue`文件中添加Instagram平台配置：
```javascript
// 添加Instagram平台配置
{
  platform: 'Instagram',
  url: 'https://www.instagram.com',
  status: 'active'
}
```

#### 7.1.3 集成结果
- 账号管理页面现在支持添加、编辑、删除Instagram平台账号
- 网站管理页面显示Instagram平台配置信息
- 平台类型编码6已正确映射到Instagram平台

#### 7.1.4 经验总结
- 确保平台类型编码在整个系统中保持一致
- 为新平台准备适当的图标资源
- 按照平台集成流程逐步实施，确保各模块正确对接

### 7.2 Facebook平台集成案例

#### 7.2.1 集成内容摘要
已完成Facebook平台在前端系统中的完整集成，包括账号管理和网站管理功能。

#### 7.2.2 具体实施步骤

##### 7.2.2.1 资源文件准备
- 复用现有图标资源，Facebook平台使用Instagram图标作为默认头像

##### 7.2.2.2 视频发布中心集成
在`PublishCenter.vue`文件中进行以下修改：
- 在platforms数组中添加Facebook平台定义（key: 7, name: 'Facebook'）
- 在availableAccounts计算属性的platformMap中添加Facebook映射

##### 7.2.2.3 账号管理页面集成
在`AccountManagement.vue`文件中进行以下修改：
- 添加Facebook平台选择器选项
- 新增Facebook账号标签页
- 更新platformTypeMap映射（Facebook为类型7）
- 添加Facebook账号过滤计算属性
- 在getPlatformTagType函数中添加Facebook的标签类型映射
- 在getDefaultAvatar函数中添加Facebook的头像映射

##### 7.2.2.4 更新账号Store平台映射
在`sau_frontend/src/stores/account.js`文件中添加Facebook平台的类型映射：
```javascript
// 平台类型映射
const platformTypes = {
  1: '小红书',
  2: '视频号',
  3: '抖音',
  4: '快手',
  5: 'TikTok',
  6: 'Instagram',
  7: 'Facebook', // 添加Facebook映射
}
```

##### 7.2.2.5 网站管理页面集成
在`Website.vue`文件中添加Facebook平台配置：
```javascript
// 添加Facebook平台配置
{
  platform: 'Facebook',
  url: 'https://www.facebook.com',
  status: 'active'
}
```

#### 7.2.3 集成结果
- 视频发布中心现在支持选择Facebook平台进行视频发布
- 账号管理页面现在支持添加、编辑、删除Facebook平台账号
- 网站管理页面显示Facebook平台配置信息
- 平台类型编码7已正确映射到Facebook平台

#### 7.2.4 修复问题
- 修复了网站板块没有显示Facebook的问题，通过在Website.vue文件中添加Facebook平台配置解决
- 修复了账号管理页面中filteredFacebookAccounts计算属性缺失的问题
- 修复了平台类型映射不一致导致的Facebook添加账号跳转到小红书登录的问题

#### 7.2.5 经验总结
- 确保所有相关计算属性都正确定义，避免页面渲染错误
- 按照平台集成流程逐步实施，确保各模块正确对接
- 平台类型编码在整个系统中保持一致
- 为新平台准备适当的图标资源，提升用户体验

## 8. 附录

### 8.1 平台类型编码表

| 平台 | 类型编码 | 平台名称 |
| --- | --- | --- |
| 小红书 | 1 | 小红书 |
| 视频号 | 2 | 视频号 |
| 抖音 | 3 | 抖音 |
| 快手 | 4 | 快手 |
| TikTok | 5 | TikTok |
| Instagram | 6 | Instagram |
| Facebook | 7 | Facebook |

### 8.2 前端架构概览
- 视频发布页面：`sau_frontend/src/views/PublishCenter.vue`
- API调用模块：`sau_frontend/src/api/publish.js`
- 账号管理：`sau_frontend/src/stores/account.js`