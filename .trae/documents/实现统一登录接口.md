# 实现统一登录接口

## 目标
创建一个新的登录接口，使用统一的流程处理各个平台的登录，参考 baseFileUploader.py 中的 Playwright 登录实现。

## 实现步骤

1. **创建新的统一登录接口**
   - 在 sau_backend.py 中添加新的路由 `/login/unified`
   - 使用 SSE 模式返回登录状态
   - 接收平台类型（type）和账号名（id）参数

2. **实现统一登录逻辑**
   - 根据平台类型获取对应的平台配置
   - 使用 Playwright 启动浏览器并导航到登录页面
   - 等待用户完成登录
   - 保存登录后的 cookie 到文件
   - 将账号信息插入数据库

3. **统一处理流程**
   - 复用 baseFileUploader.py 中的 Playwright 登录逻辑
   - 支持所有配置在 platform_configs.py 中的平台
   - 保持与原有接口相同的 SSE 响应格式

4. **清理和维护**
   - 确保资源正确释放（浏览器关闭、数据库连接关闭等）
   - 添加适当的日志记录
   - 处理可能的异常情况

## 关键设计点

- 利用现有的 PLATFORM_CONFIGS 获取平台配置
- 使用 Playwright 实现无头浏览器登录
- 保持与原有登录接口相同的外部行为
- 支持所有已配置的平台

## 预期效果

- 新的登录接口 `/login/unified` 可以处理所有平台的登录
- 登录流程统一，便于维护和扩展
- 保持与原有接口相同的 SSE 响应格式，便于前端兼容
- 支持所有配置在 platform_configs.py 中的平台